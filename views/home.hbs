<div class="content mt-3">
    <h2>Yangi Buyurtma</h2>
    <form method="post" action="/buyurtma">
        <div class="order-form">
            <input type="number" name="telefon" placeholder="Telefon" class="form-control mb-2">   
            <input type="text" name="ism" placeholder="Ism" class="form-control mb-2">
            <input type="number" name="miqdor" placeholder="Miqdor" class="form-control mb-2">
            <input type="text" name="lokatsiya" placeholder="Lokatsiya" class="form-control mb-2">
            <input type="text" name="kuryer" placeholder="Kuryer" class="form-control mb-2">
            <button class="btn btn-primary" type="submit">OK</button>
        </div>
    </form>

    <h2 class="mt-4 mt-5">Buyurtmalar</h2>

<div class="table-wrapper mt-4">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Ism</th>
                <th>Miqdor</th>
                <th>Lokatsiya</th>
                <th>Kuryer</th>
                <th>Holat</th>
                <th>Harakatlar</th>
            </tr>
        </thead>
        <tbody id="zakazList">
            {{#each zakazIstor}}
            <tr class="zakaz-item">
                <td>{{this.ism}}</td>
                <td>{{this.miqdor}}</td>
                <td>{{this.lokatsiya}}</td>
                <td>{{this.kuryer}}</td>
                <td><span class="badge bg-warning">Jarayonda</span></td>
                <td>
                    <button class="btn btn-success btn-sm">Yetkazildi</button>
                    <button class="btn btn-danger btn-sm">Bekor qilish</button>
                </td>
            </tr>
            {{/each}}
            <h3>Barcha buyurtmalar: <span class="badge bg-info">{{totalMiqdor}}</span></h3>
        </tbody>
        
    </table>
</div>

<style>
    .table-wrapper {
        max-height: 250px; /* Faqat 3 ta qator sig‘adigan balandlik */
        overflow-y: hidden; /* Avval yashirib turish */
        transition: max-height 0.5s ease-in-out; /* Animatsiya */
    }

    .table-wrapper:hover {
        max-height: 600px; /* Hover qilinganda ochiladi */
        overflow-y: auto; /* Skroll chiqadi */
    }
</style>


{{!-- <script>

    document.addEventListener("DOMContentLoaded", function () {
    const telefonInput = document.querySelector('input[name="telefon"]');
    const ismInput = document.querySelector('input[name="ism"]');
    const miqdorInput = document.querySelector('input[name="miqdor"]');
    const lokatsiyaInput = document.querySelector('input[name="lokatsiya"]');
    const kuryerInput = document.querySelector('input[name="kuryer"]');

    telefonInput.addEventListener("input", async function () {
        const telefon = telefonInput.value.trim();
        if (telefon.length >= 9) {
            try {
                const response = await fetch(`/get-order?telefon=${telefon}`);
                const data = await response.json();

                if (data.order) {
                    ismInput.value = data.order.ism || '';
                    miqdorInput.value = data.order.miqdor || '';
                    lokatsiyaInput.value = data.order.lokatsiya || '';
                    kuryerInput.value = data.order.kuryer || '';
                } else {
                    ismInput.value = '';
                    miqdorInput.value = '';
                    lokatsiyaInput.value = '';
                    kuryerInput.value = '';
                }
            } catch (error) {
                console.error('Ma’lumot olishda xatolik:', error);
            }
        }
    });
});


    document.addEventListener("DOMContentLoaded", function () {
        const tableWrapper = document.querySelector(".table-wrapper");
        const rows = document.querySelectorAll("#zakazList .zakaz-item");

        if (rows.length > 3) {
            tableWrapper.style.maxHeight = rows[0].offsetHeight * 3 + "px";
        }
    });
</script> --}}

<script src="/js/zakaz.js"></script>
